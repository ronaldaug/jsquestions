<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Reverse String</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.5.0/materia/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/tomorrow-night-blue.min.css">
    <style>
        body{
            margin:10px;
            background:#f7f8f9;
        }
        .center-box{
            margin:100px auto;
            max-width:500px;
            padding:20px;
            background:#fff;
            box-shadow:0 1px 10px #ddd;
        }
        #editor{
            min-height:100px;
        }
        .line{
            margin:10px 0 10px;
            border-top:1px dashed #ddd;
        }
    </style>
</head>
<body>
    <div class="center-box">
            <form id="jscourse">
                
               <div class="message my-3"></div>

                Question 1. Please reverse the string
                
                <div class="line"></div>

                <div class="row">
                    <div class="col-3">Input value</div>
                    <div class="col-9"><b>gnidocevoli</b></div>
                </div>

                <div class="row">
                    <div class="col-3">Expect value</div>
                    <div class="col-9"><b>ilovecoding</b></div>
                </div>

                <div id="editor" class="my-4">

function reverseString(inputStr){
    
}
                </div>
                <div class="result"></div>
                <button class="mt-4 btn btn-success">Submit</button>
            </form>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/theme-tomorrow_night_blue.min.js"></script>
    <script>
      
        let editor = ace.edit("editor");
        editor.setTheme("ace/theme/tomorrow_night_blue");
        editor.session.setMode("ace/mode/javascript");

        const JSCourse = document.querySelector("#jscourse");
      
      
        JSCourse.addEventListener("submit",e=>{
            e.preventDefault();

            const data = {
                'code':editor.getValue()
            }

            fetch('/reverse',{
                method:"post",
                headers:{
                    "Content-Type":"application/json"
                },
                body:JSON.stringify(data)
            })
            .then(e=>e.json())
            .then(res=>{

              const Res = document.querySelector(".result").innerHTML;
              const ans = `<p>Your result = ${res.data}</p>`;
              if(res.data.next){
                  ans += `<a class="btn btn-sm btn-success" href="${res.data.next}">Go to next lesson </a>`;
              }
              Res.innerHTML = ;

                if(res.code !== 200){
                    message('failed',res.message);
                    return;
                }

                message('success',res.message);

            })
            .catch(err=>{
               console.log(err)
                message('failed','Opps! Something went wrong<br> please make sure your function is correct!');
              
            })
        })
      
      
      function message(status,msg){
          const cls = status == 'success'?'alert-success':'alert-danger';
          document.querySelector(".message").innerHTML = `<p class="alert ${cls}">${msg}</p>`;
        
          setTimeout(()=>{
            document.querySelector(".message").innerHTML = '';
          },3000)
                  
      }
    </script>
</body>
</html>